From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: Andreas Dinter <andreas.dinter@systec-electronic.com>
Date: Tue, 6 Feb 2024 11:54:06 +0100
Subject: [PATCH] arch/arm/dts/k3-am625-sk.dts: Enable CLKOUT0 to supply
 network phy's (EXT_REFCLK1.CLKOUT0)

Signed-off-by: Andreas Dinter <andreas.dinter@systec-electronic.com>
---
 dts/upstream/src/arm64/ti/k3-am625-sk.dts | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

diff --git a/dts/upstream/src/arm64/ti/k3-am625-sk.dts b/dts/upstream/src/arm64/ti/k3-am625-sk.dts
index 122f21b3399..f3534338b41 100644
--- a/dts/upstream/src/arm64/ti/k3-am625-sk.dts
+++ b/dts/upstream/src/arm64/ti/k3-am625-sk.dts
@@ -125,6 +125,12 @@
 			AM62X_IOPAD(0x01d4, PIN_INPUT, 7) /* (B15) UART0_RTSn.GPIO1_23 */
 		>;
 	};
+
+	ext_refclk0_clkout0: ext-refclk0-clkout0 {
+		pinctrl-single,pins = <
+			AM62X_IOPAD(0x01f0, PIN_OUTPUT, 5) /* (A18) EXT_REFCLK1.CLKOUT0 */
+		>;
+	};
 };
 
 &main_gpio0 {
@@ -154,7 +160,11 @@
 
 &cpsw3g {
 	pinctrl-names = "default";
-	pinctrl-0 = <&main_rgmii1_pins_default>, <&main_rgmii2_pins_default>;
+	pinctrl-0 = <&main_rgmii1_pins_default>,
+			<&main_rgmii2_pins_default>,
+			<&ext_refclk0_clkout0>;
+	assigned-clocks = <&k3_clks 157 20>;
+	assigned-clock-parents = <&k3_clks 157 22>;
 
 	cpts@3d000 {
 		/* MAP HW3_TS_PUSH to GENF1 */
-- 
2.50.1

